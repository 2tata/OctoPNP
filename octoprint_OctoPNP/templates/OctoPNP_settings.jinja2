<form class="form-horizontal">
    <div class="accordion" id="accordion">

        <!-- Tray settings -->
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#tray-settings"><h4>{{ _('Tray') }}</h4></a>
            </div>
            <div id="tray-settings" class="accordion-body collapse in">
                <div class="accordion-inner">
                    <div class="row-fluid">
                        <div class="span4"><h4>{{ _('Tray position') }}</h4></div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">Position of the lower left corner at the rim's outer perimeter. Note that the printer will move to the tray after enabling the vacuum nozzle, so the position must be relative to this nozzle if a firmware-offset is used.
                        </div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="tray.position.x">X</label>
                        <div class="controls">
                            <div class="input-append">
                                <input id="tray.position.x" type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.tray.x">
                                <span class="add-on">mm</span>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="tray.position.y">Y</label>
                        <div class="controls">
                            <div class="input-append">
                                <input id="tray.position.y" type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.tray.y">
                                <span class="add-on">mm</span>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="tray.position.z">Z</label>
                        <div class="controls">
                            <div class="input-append">
                                <input id="tray.position.z" type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.tray.z">
                                <span class="add-on">mm</span>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span4"><h4>{{ _('Tray dimension') }}</h4></div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="tray.rows">Rows</label>
                        <div class="controls">
                            <input id="tray.rows" type="number" step="1" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.tray.rows">
                        </div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="tray.columns">Columns</label>
                        <div class="controls">
                            <input id="tray.columns" type="number" step="1" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.tray.columns">
                        </div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="tray.boxsize">Box size</label>
                        <div class="controls">
                            <div class="input-append">
                                <input id="tray.boxsize" type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.tray.boxsize">
                                <span class="add-on">mm</span>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="tray.rimsize">Rim size</label>
                        <div class="controls">
                             <div class="input-append">
                                <input id="tray.rimsize" type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.tray.rimsize">
                                <span class="add-on">mm</span>
                             </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Camera settings -->
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#camera-settings"><h4>{{ _('Cameras') }}</h4></a>
            </div>
            <div id="camera-settings" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="row-fluid">
                        <div class="span1"><strong>{{ _('Name') }}</strong></div>
                        <div class="span3"><strong>{{ _('X') }}</strong></div>
                        <div class="span3"><strong>{{ _('Y') }}</strong></div>
                        <div class="span3"><strong>{{ _('Focus Distance') }}</strong></div>
                        <div class="span2"><strong>{{ _('px/mm') }}</strong></div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="row-fluid">
                                <div class="span1"><strong>Head</strong></div>
                                <div class="span3">
                                    <div class="input-append">
                                        <input type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.camera.head.x">
                                        <span class="add-on">mm</span>
                                    </div>
                                </div>
                                <div class="span3">
                                    <div class="input-append">
                                        <input type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.camera.head.y">
                                        <span class="add-on">mm</span>
                                    </div>
                                </div>
                                <div class="span3">
                                    <div class="input-append">
                                        <input type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.camera.head.z">
                                        <span class="add-on">mm</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="row-fluid">
                                <div class="span1"></div>
                                <div class="span3">Image Path:</div>
                                <div class="span8">
                                    <div class="input-append">
                                        <input type="text" class="input-xlarge" data-bind="value: settings.plugins.OctoPNP.camera.head.path">
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span1"></div>
                                <div class="span3">Binarization threshold:</div>
                                <div class="span8">
                                    <div class="input-append">
                                        <input type="number" step="1.0" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.camera.head.binary_thresh">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                        <div class="row-fluid">
                        <div class="span12"></div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="row-fluid">
                                <div class="span1"><strong>Bed</strong></div>
                                <div class="span3">
                                    <div class="input-append">
                                        <input type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.camera.bed.x">
                                        <span class="add-on">mm</span>
                                    </div>
                                </div>
                                <div class="span3">
                                    <div class="input-append">
                                        <input type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.camera.bed.y">
                                        <span class="add-on">mm</span>
                                    </div>
                                </div>
                                <div class="span3">
                                    <div class="input-append">
                                        <input type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.camera.bed.z">
                                        <span class="add-on">mm</span>
                                    </div>
                                </div>
                                 <div class="span2">
                                    <div class="input-append">
                                        <input type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.camera.bed.pxPerMM">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="row-fluid">
                                <div class="span1"></div>
                                <div class="span3">Image Path:</div>
                                <div class="span8">
                                    <div class="input-append">
                                        <input type="text" class="input-xlarge" data-bind="value: settings.plugins.OctoPNP.camera.bed.path">
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span1"></div>
                                <div class="span3">Binarization threshold:</div>
                                <div class="span8">
                                    <div class="input-append">
                                        <input type="number" step="1.0" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.camera.bed.binary_thresh">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="row-fluid">
                                <div class="span4"><strong>Grab-script Path:</strong></div>
                                <div class="span8">
                                    <div class="input-append">
                                        <input type="text" class="input-xlarge" data-bind="value: settings.plugins.OctoPNP.camera.grabScriptPath">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Nozzle settings -->
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#nozzle-settings"><h4>{{ _('Vacuum Nozzle') }}</h4></a>
            </div>
            <div id="nozzle-settings" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="row-fluid">
                        <div class="span4"><h4>{{ _('Nozzle Offset') }}</h4></div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="vacnozzle.x">{{ _('X') }}</label>
                        <div class="controls">
                            <div class="input-append">
                                <input id="vacnozzle.x" type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.vacnozzle.x">
                                <span class="add-on">mm</span>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="vacnozzle.y">{{ _('Y') }}</label>
                        <div class="controls">
                            <div class="input-append">
                                <input id="vacnozzle.y" type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.vacnozzle.y">
                                <span class="add-on">mm</span>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="vacnozzle.y">{{ _('Z pressure offset') }}</label>
                        <div class="controls">
                            <div class="input-append">
                                <input id="vacnozzle.z_pressure" type="number" step="0.01" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.vacnozzle.z_pressure">
                                <span class="add-on">mm</span>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <label class="control-label" for="vacnozzle.extruder_nr">{{ _('Extruder Number') }}</label>
                        <div class="controls">
                            <input id="vacnozzle.extruder_nr" type="number" step="1" class="input-mini text-right" data-bind="value: settings.plugins.OctoPNP.vacnozzle.extruder_nr">
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Calibration -->
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#calibration"><h4>{{ _('Calibration') }}</h4></a>
            </div>
            <div id="calibration" class="accordion-body collapse">
                <div class="accordion-inner">

                    <div class="row-fluid">
                        <div class="span8">
                            This is an experimental "calibration wizard".
                        </div>
                    </div>

                    <div class="row-fluid">
                        <div class="span8">
                            <div id="webcam_container" tabindex="0" data-bind="event: { keydown: onKeyDown, mouseover: onMouseOver, mouseout: onMouseOut, focus: onFocus }">
                                <canvas id="headCanvas" width="400" height="400"></canvas>
                            
                                <div class="keycontrol_overlay" data-bind="visible: showKeycontrols">
                                    
                                    <div class="keycontrol_overlay_heading">{{ _("Keyboard controls active") }} <a href="#" data-bind="click: toggleKeycontrolHelp"><i data-bind="css: { 'icon-chevron-down': !keycontrolHelpActive(), 'icon-chevron-up': keycontrolHelpActive() }"></i></a></div>
                                    
                                    <div data-bind="visible: keycontrolHelpActive">
                                        <div class="keycontrol_overlay_column">
                                            <kbd>&rarr;</kbd> / <kbd>&larr;</kbd>: {{ _("X Axis") }} +/-<br>
                                            <kbd>&uarr;</kbd> / <kbd>&darr;</kbd>: {{ _("Y Axis") }} +/-<br>
                                        </div>
                                        <div class="keycontrol_overlay_column">
                                            <kbd>1</kbd>, <kbd>2</kbd>, <kbd>3</kbd>, <kbd>4</kbd>: {{ _("Stepsize") }} 0.1, 1, 10, 100mm
                                        </div>
                                    </div>
                                </div>
                                <div data-bind="visible: control.keycontrolPossible">
                                    <small class="muted">{{ _("Hint: If you move your mouse over the picture, you enter keyboard control mode.") }}</small>
                                </div>
                            </div>
                        </div>
                        <div class="span4">
                            <h4>E0 <-> HeadCamera</h4>
                            <button data-bind="click: cameraOffset, enable: isConnected">{{ _('Camera to object') }}</button>
                            <button data-bind="click: saveCameraOffset, enable: statusCameraOffset">{{ _('Save offset') }}</button>
                            <br><br>

                            <h4>Tray position</h4>
                            <button data-bind="click: requestImage">{{ _('TL') }}</button>
                            <button data-bind="click: requestImage">{{ _('TR') }}</button><br>
                            <button data-bind="click: requestImage">{{ _('BL') }}</button>
                            <button data-bind="click: requestImage">{{ _('BR') }}</button>

                            <br><br>
                            <h4>Object pos. on printbed</h4>
                            <div class="form-group">
                                <span>X&nbsp;</span><input id="objectPosX" type="number" step="0.01" class="input-mini text-right" data-bind="value: objectPositionX"></input>
                                <span>Y&nbsp;</span><input id="objectPosY" type="number" step="0.01" class="input-mini text-right" data-bind="value: objectPositionY"></input>
                            </div>                            

                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <strong>Current X-offset: </strong><kbd>0</kbd> <strong>+ correction: </strong><kbd data-bind="text: offsetCorrectionX"></kbd>
                            <strong>Current Y-offset: </strong><kbd>0</kbd> <strong>+ correction: </strong><kbd data-bind="text: offsetCorrectionY"></kbd>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</form>